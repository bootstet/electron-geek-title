# 极客标题 - 故障排除指南

## 🚨 常见问题解决方案

### 1. HTTP 404 错误：模型不存在

**错误信息示例：**
```
HTTP 404 {"error":{"code":"InvalidEndpointOrModel.NotFound","message":"The model or endpoint doubao-vision does not exist or you do not have access to it"}}
```

**解决步骤：**

#### 方案一：使用自定义模型名称
1. 登录您的AI服务提供商控制台
2. 查看您的实际模型名称
3. 在应用中选择"自定义模型"
4. 输入完整的模型名称

#### 方案二：验证配置
1. **检查API Key**
   - 确认API Key是否有效
   - 检查账户余额是否充足
   - 确认API Key权限是否包含视觉模型

2. **检查模型名称**
   - 豆包：查看推理接入点的确切名称
   - 阿里云：确认使用的是正确的模型ID
   - 智谱：验证模型名称拼写

3. **检查API端点**
   - 豆包：`https://ark.cn-beijing.volces.com/api/v3`
   - 阿里云：`https://dashscope.aliyuncs.com/compatible-mode/v1`
   - 智谱：`https://open.bigmodel.cn/api/paas/v4`
   - OpenAI：`https://api.openai.com/v1`

### 2. 不同AI服务商的配置方法

#### 豆包/火山引擎 ⭐ 重要更新

豆包需要使用**推理接入点**方式配置，详细步骤：

1. **访问控制台**：https://console.volcengine.com/ark
2. **创建推理接入点**：
   - 点击左侧"推理接入点"菜单
   - 点击"创建接入点"按钮
   - 选择支持**视觉理解**的Doubao模型（注意：不是图像生成模型）
   - 创建完成后获得接入点ID（格式：ep-xxxxxxxxx-xxxxx）

3. **在应用中配置**：
   - 选择"豆包-推理接入点"选项
   - 输入接入点ID（不是模型名称）
   - 输入API Key
   - 点击"测试连接"验证

4. **常见错误**：
   - ❌ 使用图像生成模型（如Doubao-Seadream-4.0）
   - ✅ 使用视觉理解接入点
   - ❌ 直接使用模型名称
   - ✅ 使用接入点ID格式

详细配置说明请参考：[豆包推理接入点配置指南.md](./豆包推理接入点配置指南.md)

#### 阿里云DashScope
1. 访问：https://bailian.console.aliyun.com/
2. 开通DashScope服务
3. 常用模型名称：
   - `qwen-vl-max`
   - `qwen-vl-plus`
   - `qwen-vl-chat-v1`

#### 智谱AI
1. 访问：https://open.bigmodel.cn/
2. 获取API Key
3. 常用模型名称：
   - `glm-4v`
   - `glm-4v-plus`

#### OpenAI
1. 访问：https://platform.openai.com/
2. 获取API Key
3. 模型名称：
   - `gpt-4o`
   - `gpt-4o-mini`
   - `gpt-4-vision-preview`

### 3. 连接测试功能使用

1. 点击"API设置"按钮
2. 输入API Key
3. 选择或自定义模型
4. 点击绿色的"测试连接"按钮
5. 查看底部日志区域的测试结果

### 4. 其他常见问题

#### 问题：图片处理失败
**解决方案：**
- 确认图片格式支持（JPG, PNG, WebP, BMP）
- 检查图片文件大小（建议小于10MB）
- 确认图片文件路径没有特殊字符

#### 问题：生成的标题为空
**解决方案：**
- 检查提示词是否合适
- 确认选择了生成中文和/或英文标题
- 调整max_tokens参数（默认500）

#### 问题：应用启动失败
**解决方案：**
- 确认Node.js版本（建议16+）
- 重新安装依赖：`npm install`
- 清除缓存：`npm run build:renderer`

#### 问题：导出功能异常
**解决方案：**
- 确认有生成结果后再导出
- 检查文件保存路径权限
- 尝试选择不同的保存位置

## 🔧 高级配置

### 自定义API端点
如果使用自建或代理服务，可以在"自定义模型"模式下：
1. 修改baseURL为您的端点
2. 输入对应的模型名称
3. 确保API兼容OpenAI格式

### 批量处理优化
1. **并发数设置**：根据API限制调整（1-10）
2. **图片压缩**：大图片建议开启压缩
3. **提示词优化**：使用具体的产品描述

### 提示词模板示例

**跨境电商标题：**
```
你是一名跨境电商运营，图片是{类目}产品，现在要写一个符合跨境电商的中文标题和英文标题，要求180至220个字符的英文标题和180至220个字符的中文标题之间|分开
```

**SEO友好标题：**
```
请为这个{类目}产品生成SEO友好的标题，包含主要关键词，格式：
中文：[中文SEO标题]
英文：[English SEO Title]
```

## 📞 技术支持

如果以上方法都无法解决问题，请：

1. **收集错误信息**
   - 完整的错误消息
   - 使用的模型名称
   - API提供商
   - 操作步骤

2. **检查系统环境**
   - 操作系统版本
   - Node.js版本
   - 网络连接状态

3. **尝试最小化测试**
   - 使用单张图片测试
   - 使用简单的提示词
   - 降低并发数到1

## 📝 更新日志

### v1.0.7 主要更新
- ✅ 支持自定义模型名称
- ✅ 添加连接测试功能
- ✅ 完善错误处理和日志显示
- ✅ 优化批量处理逻辑
- ✅ 支持多种AI服务提供商

### 已知问题
- 某些特殊字符可能影响文件重命名
- 超大图片可能导致内存占用过高
- 网络不稳定时可能出现超时

---

**提示：** 大部分问题都可以通过正确配置API Key和模型名称解决。建议先使用"测试连接"功能验证配置的正确性。